<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Creative Producer | Mike Bedont</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="../portfolio.css" />
</head>
<body>

  <button id="backToTop" title="Back to top">↑ Top</button>

  <header class="site-header">
    <h1>Mike Bedont</h1>
    <p class="tagline">Creative Producer • Technical Director • Content Strategist</p>
    <nav class="portfolio-nav">
        <a href="../portfolio.html">Featured</a>
        <a href="creative.html" class="active">Creative</a>
        <a href="live.html">Technical</a>
        <a href="academic.html">Strategy</a>
    </nav>
  </header>

  <main>
    <section class="playlist-showcase">
      <div class="playlist-meta">
        <h3>Visual Radio | The Economy of Nothing</h3>
        <p>Flagship talk show featuring <strong>absurdist world-building</strong> and corporate satire. I serve as the lead producer and creative director.</p>
      </div>
      <div class="video-player">
        <iframe id="player-eon" src="" allowfullscreen loading="lazy"></iframe>
      </div>
      <div class="playlist-carousel" id="carousel-eon"><p>Loading...</p></div>
    </section>

    <section class="playlist-showcase">
      <div class="playlist-meta">
        <h3>Academy Tangents</h3>
        <p>A <strong>full-cycle production</strong> showcase: I handled scripting, on-camera presentation, and the final edit.</p>
      </div>
      <div class="video-player">
        <iframe id="player-tangents" src="" allowfullscreen loading="lazy"></iframe>
      </div>
      <div class="playlist-carousel" id="carousel-tangents"><p>Loading...</p></div>
    </section>

    <section class="playlist-showcase">
      <div class="playlist-meta">
        <h3>History of Everything (in 30 Seconds)</h3>
        <p>A series of <strong>micro-learning shorts</strong> distilling massive historical narratives into high-impact segments.</p>
      </div>
      <div class="video-player">
        <iframe id="player-history-shorts" src="" allowfullscreen loading="lazy"></iframe>
      </div>
      <div class="playlist-carousel" id="carousel-history-shorts"><p>Loading...</p></div>
    </section>

    <section class="playlist-showcase">
      <div class="playlist-meta">
        <h3>Mr. Green's Silver Screen Critiques</h3>
        <p>Character-driven <strong>motion graphics</strong> series building a unique comedic persona through dynamic sequencing.</p>
      </div>
      <div class="video-player">
        <iframe id="player-mr-green" src="" allowfullscreen loading="lazy"></iframe>
      </div>
      <div class="playlist-carousel" id="carousel-mr-green"><p>Loading...</p></div>
    </section>

    <section class="playlist-showcase">
      <div class="playlist-meta">
        <h3>Podcast Highlights | The Economy of Nothing</h3>
        <p><strong>High-retention social media clips</strong> featuring precision editing and custom subtitle design.</p>
      </div>
      <div class="video-player">
        <iframe id="player-eon-clips" src="" allowfullscreen loading="lazy"></iframe>
      </div>
      <div class="playlist-carousel" id="carousel-eon-clips"><p>Loading...</p></div>
    </section>
  </main>

  <script>
    const playlistObserver = new IntersectionObserver((entries, observer) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const section = entry.target;
          const pId = section.getAttribute('data-playlist');
          const cId = section.getAttribute('data-carousel');
          const plId = section.getAttribute('data-player');
          if (pId && cId && plId) { fetchPlaylist(pId, cId, plId); }
          observer.unobserve(section);
        }
      });
    }, { rootMargin: '0px 0px 200px 0px' });

    async function fetchPlaylist(playlistId, carouselId, playerId) {
      const carousel = document.getElementById(carouselId);
      const player = document.getElementById(playerId);
      const feedURL = `https://api.rss2json.com/v1/api.json?rss_url=https://www.youtube.com/feeds/videos.xml?playlist_id=${playlistId}`;
      try {
        const res = await fetch(feedURL);
        const data = await res.json();
        if (data.items) {
          carousel.innerHTML = "";
          data.items.forEach((item, index) => {
            const videoId = item.link.match(/(?:v=|\/)([0-9A-Za-z_-]{11})/)[1];
            const img = document.createElement("img");
            img.src = item.thumbnail;
            img.onclick = () => {
              carousel.querySelectorAll("img").forEach(el => el.classList.remove("active-thumb"));
              img.classList.add("active-thumb");
              player.src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
            };
            if (index === 0) { img.classList.add("active-thumb"); player.src = `https://www.youtube.com/embed/${videoId}`; }
            carousel.appendChild(img);
          });
        }
      } catch (err) { console.error(err); }
    }

    const playlistMap = {
      "carousel-eon": "PLPrT6qMbooEmOi60hDqeFKFDgmO1lRfWA",
      "carousel-tangents": "PLMrpXL7ZxXYW_Sqcr6f1ujqI5UwlW2-uc",
      "carousel-history-shorts": "PLY4x9w5iGP-7FV3w60svPNSam_IzrC-XP",
      "carousel-mr-green": "PLPrT6qMbooEkl1D5Vhjo0AfJkchM0yHtV",
      "carousel-eon-clips": "PLPrT6qMbooElcHXTZOFjSZJiu3m2XKi-7"
    };

    document.querySelectorAll('.playlist-showcase').forEach(section => {
      const cId = section.querySelector('.playlist-carousel')?.id;
      if (cId && playlistMap[cId]) {
        section.setAttribute('data-playlist', playlistMap[cId]);
        section.setAttribute('data-carousel', cId);
        section.setAttribute('data-player', section.querySelector('iframe').id);
        playlistObserver.observe(section);
      }
    });
  </script>
</body>
</html>
