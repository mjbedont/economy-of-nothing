<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Connect with fans and creators of The Economy of Nothing. Share your thoughts on the series!">
    <meta name="keywords" content="Economy of Nothing, message board, dystopian sci-fi, community">
    <meta name="author" content="The Economy of Nothing Team">
    <title>The Economy of Nothing - People</title>
    <link rel="stylesheet" href="style.css">
    <script defer>
        document.addEventListener("DOMContentLoaded", () => {
            const messageContainer = document.getElementById("messages");

            // Fetch messages from the serverless function
            fetch("/.netlify/functions/submit-message")
                .then(response => response.text())
                .then(data => {
                    messageContainer.textContent = data || "No messages yet. Be the first to post!";
                })
                .catch(error => {
                    console.error("Failed to load messages:", error);
                    messageContainer.textContent = "Error loading messages.";
                });

            // Handle form submission to post a new message
            document.getElementById("message-form").addEventListener("submit", (e) => {
                e.preventDefault();
                const newMessage = document.getElementById("new-message").value.trim();
                if (!newMessage) return alert("Message cannot be empty!");

                fetch("/.netlify/functions/submit-message", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/x-www-form-urlencoded"
                    },
                    body: `message=${encodeURIComponent(newMessage)}`
                })
                .then(response => response.text())
                .then(data => {
                    messageContainer.textContent = data;
                    document.getElementById("new-message").value = ""; // Clear the input
                })
                .catch(error => {
                    console.error("Failed to submit message:", error);
                    alert("Failed to submit your message. Please try again later.");
                });
            });
        });
    </script>
</head>
<body>
    <!-- Header Section -->
    <header>
        <h1>The Economy of Nothing</h1>
        <p>Join the Conversation</p>
    </header>

    <!-- Navigation Section -->
    <nav>
        <a href="/episodes.html">Episodes</a>
        <a href="/codex.html">Codex</a>
        <a href="/pizzaparty.html">Pizza Party</a>
        <a href="/people.html" class="active">People</a>
    </nav>

    <!-- Main Content Section -->
    <main>
        <h2>Message Board</h2>
        <div id="messages" class="message-board">
            Loading messages...
        </div>

        <h3>Post a Message</h3>
        <form id="message-form">
            <textarea id="new-message" name="message" rows="4" placeholder="Type your message here..."></textarea>
            <button type="submit">Post</button>
        </form>
    </main>

    <!-- Footer Section -->
    <footer>
        <p>&copy; 56.009 Nothing Inc.</p>
        <p class="nostalgia-note">Best viewed on Netscape Navigator. Join our <a href="#">web ring</a>!</p>
        <p class="visitor-counter">You are visitor number: <span id="visitor-count">Loading...</span></p>
    </footer>
</body>
</html>



