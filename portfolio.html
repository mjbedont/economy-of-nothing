<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visual Radio | The Economy of Nothing</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap">
    <link rel="stylesheet" href="portfolio.css">
</head>
<body>

<header class="site-header">
    <h1>The Economy of Nothing</h1>
    <p class="tagline">Chronicling corporate collapse through absurdist radio.</p>
</header>

<main>
    <section class="playlist-showcase" data-tags="eon animation">
        <div class="playlist-meta">
            <h3>Visual Radio | Podcast Feed</h3>
            <p>Welcome to the flagship feed for EoN Visual Radio, where nothing is real but the playlist keeps playing.</p>
        </div>

        <div class="video-player">
            <iframe id="mainVideo-eon" src="" allowfullscreen loading="lazy"></iframe>
        </div>

        <div class="playlist-carousel" id="carousel-eon">
            <p>Scanning frequencies...</p>
        </div>

        <a href="https://www.youtube.com/playlist?list=PLPrT6qMbooEmOi60hDqeFKFDgmO1lRfWA" target="_blank" class="cta-link">
            ▶️ View Full Playlist on YouTube
        </a>
    </section>
</main>

<button id="backToTop">↑ Top</button>

<script>
    const playlistId_eon = "PLPrT6qMbooEmOi60hDqeFKFDgmO1lRfWA";
    const feedURL_eon = `https://api.rss2json.com/v1/api.json?rss_url=https://www.youtube.com/feeds/videos.xml?playlist_id=${playlistId_eon}`;

    fetch(feedURL_eon)
        .then(res => res.json())
        .then(data => {
            const carousel = document.getElementById("carousel-eon");
            const player = document.getElementById("mainVideo-eon");
            
            carousel.innerHTML = "";

            data.items.forEach((item, index) => {
                const videoId = item.link.match(/(?:v=|\/)([0-9A-Za-z_-]{11})/)[1];
                const img = document.createElement("img");
                img.src = item.thumbnail;
                img.alt = item.title;

                img.addEventListener("click", () => {
                    document.querySelectorAll("#carousel-eon img").forEach(el => el.classList.remove("active-thumb"));
                    img.classList.add("active-thumb");
                    player.src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
                });

                if (index === 0) {
                    img.classList.add("active-thumb");
                    player.src = `https://www.youtube.com/embed/${videoId}`;
                }
                carousel.appendChild(img);
            });
        })
        .catch(() => {
            document.getElementById("carousel-eon").innerHTML = "<p>Error loading feed.</p>";
        });

    // Back to Top Button Logic
    const btt = document.getElementById("backToTop");
    window.onscroll = () => {
        btt.classList.toggle("show", window.scrollY > 200);
    };
    btt.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });
</script>

</body>
</html>
