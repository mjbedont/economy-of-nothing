<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Explore the Codex of The Economy of Nothing." />
  <title>Codex of Nothing | Personnel Terminal</title>
  <link rel="stylesheet" href="codexstyle.css" />
  <style>
    /* Adding a small fade-in effect for the dynamic content */
    #human-display-container {
      animation: fadeIn 0.8s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>

  <header>
    <h1>Codex of Nothing</h1>
    <button id="theme-toggle" title="Toggle Terminal Mode">‚òÄÔ∏è</button>
  </header>

  <div class="random-fact-banner">
    <span>üì° INTERCEPTED: <span id="random-fact">RE-ESTABLISHING UPLINK...</span></span>
  </div>

  <nav id="nav-strip">
    <a href="/codex/">Home</a>
    <a href="/codex/humans/">Humans</a>
    <a href="/codex/aliens/">Aliens</a>
    <a href="/codex/creatures/">Creatures</a>
    <a href="/codex/robots/">Robots</a>
    <a href="/codex/transportation/">Ships</a>
    <a href="/codex/locations/">Places</a>
    <a href="/index.html" style="color: var(--red);">EXIT_SYSTEM</a>
  </nav>

  <main class="content">
    <section>
      <h2 class="section-title">üìÇ Database Access</h2>
      <p>Welcome to the <strong>Nothing Corporation</strong> internal repository. Unauthorized access is a violation of your Friends & Benefits‚Ñ¢ agreement.</p>
    </section>

    <section id="featured-human-section">
      <h2 class="section-title">üë§ Random Personnel File: <span id="human-name-header">Scanning...</span></h2>
      <div id="human-display-container">
         <p>Initializing terminal uplink and bypassing corporate firewalls...</p>
      </div>
    </section>
  </main>

  <script>
    // 1. Theme Toggle Logic
    const themeBtn = document.getElementById('theme-toggle');
    themeBtn.addEventListener('click', () => {
      const isLight = document.body.classList.toggle('light');
      themeBtn.textContent = isLight ? 'üåô' : '‚òÄÔ∏è';
    });

    // 2. Random Fact Ticker Logic
    async function fetchRandomFact() {
      const factEl = document.getElementById('random-fact');
      try {
        const response = await fetch('../data/facts.txt');
        if (!response.ok) throw new Error();
        const text = await response.text();
        const facts = text.split('\n').filter(f => f.trim());
        factEl.textContent = facts[Math.floor(Math.random() * facts.length)];
      } catch {
        factEl.textContent = "SIGNAL INTERRUPTED: CORPORATE CENSORSHIP ACTIVE.";
      }
    }

    // 3. Random Human Loader Logic
    async function loadRandomHuman() {
      const container = document.getElementById('human-display-container');
      const headerName = document.getElementById('human-name-header');

      try {
        // Path to your JSON file
        const response = await fetch('../data/humans.json');
        if (!response.ok) throw new Error();
        const humans = await response.json();
        
        // Select a random entry
        const person = humans[Math.floor(Math.random() * humans.length)];

        // Update UI
        headerName.textContent = person.name;
        container.innerHTML = `
          <div class="character-box">
            <div class="character-summary">
              <img src="${person.image}" alt="${person.name}" onerror="this.src='https://via.placeholder.com/300x200?text=REDACTED+IMAGE'"/>
              <h3>${person.name}</h3>
              <p><strong>Primary Role:</strong> ${person.role}</p>
              <p><strong>Bio:</strong> ${person.desc}</p>
              <br>
              <p><a href="${person.link}" class="character-link">‚Üí Access Full Personnel File</a></p>
            </div>
          </div>
        `;
      } catch (error) {
        headerName.textContent = "ERROR";
        container.innerHTML = `
          <div class="character-box" style="border-color: var(--red);">
            <p style="color: var(--red);"><strong>CRITICAL ERROR:</strong> Unable to retrieve personnel data from Nothing Corp Mainframe. Please report to your supervisor for re-education.</p>
          </div>
        `;
      }
    }

    // Initialize Page
    fetchRandomFact();
    loadRandomHuman();
  </script>
</body>
</html>
