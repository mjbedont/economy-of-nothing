<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Pizza Party - Play exciting games set in The Economy of Nothing universe!">
    <meta name="keywords" content="Pizza Party, Economy of Nothing, games, JavaScript, arcade">
    <meta name="author" content="The Economy of Nothing Team">
    <title>Pizza Party - Arcade Games</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: #222;
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        header, nav, footer {
            text-align: center;
            margin-bottom: 20px;
        }

        main {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #game-container {
            width: 360px;
            height: 640px;
            background: #000;
            border: 3px solid #fff;
            border-radius: 8px;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        }

        #game-output {
            font-family: "Courier New", Courier, monospace;
            font-size: 14px;
            white-space: pre-wrap;
            line-height: 1.5;
        }

        button {
            margin: 10px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background: #444;
            border: 1px solid #fff;
            border-radius: 5px;
            color: #fff;
        }

        button:hover {
            background: #666;
        }

        #game-over {
            display: none;
            text-align: center;
        }

        #game-over h2 {
            color: red;
        }

        #leaderboard {
            margin-top: 20px;
            width: 360px;
            background: #111;
            border: 3px solid #fff;
            border-radius: 8px;
            padding: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        }

        #leaderboard h3 {
            margin: 0;
            text-align: center;
        }

        #leaderboard ul {
            list-style-type: none;
            padding: 0;
        }

        #leaderboard li {
            margin: 5px 0;
            font-family: "Courier New", Courier, monospace;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <header>
        <h1>Pizza Party</h1>
        <p>Arcade Games in the Economy of Nothing Universe</p>
    </header>
    <nav>
        <a href="/index.html">Home</a>
        <a href="/episodes.html">Episodes</a>
        <a href="/codex.html">Codex</a>
        <a href="/people.html">People</a>
    </nav>
    <main>
        <h2>Play Distress Call Simulator</h2>
        <div id="game-container">
            <pre id="game-output"></pre>
        </div>
        <div id="controls">
            <button id="select-mission">Select Mission</button>
            <button id="start-game" disabled>Start Mission</button>
            <button id="buy-fuel">Buy Fuel</button>
            <button id="buy-medical">Buy Medical Kits</button>
        </div>
        <div id="game-over">
            <h2>Game Over!</h2>
            <p>Your journey has come to an end. Try again?</p>
            <button id="restart-game">Restart</button>
        </div>
        <div id="leaderboard">
            <h3>Leaderboard</h3>
            <ul id="leaderboard-stats">
                <li>Social Score: 0</li>
                <li>Missions Completed: 0</li>
                <li>Gross Credits: 0</li>
            </ul>
        </div>
    </main>
    <footer>
        <p>&copy; 56.009 Nothing Inc.</p>
        <p class="nostalgia-note">Best viewed on Netscape Navigator. Join our <a href="#">web ring</a>!</p>
        <p class="visitor-counter">You are visitor number: <span id="visitor-count">1</span></p>
    </footer>

    <script>
        // === Game Logic ===
        const output = document.getElementById('game-output');
        const selectMissionButton = document.getElementById('select-mission');
        const startButton = document.getElementById('start-game');
        const buyFuelButton = document.getElementById('buy-fuel');
        const buyMedicalButton = document.getElementById('buy-medical');
        const gameOverScreen = document.getElementById('game-over');
        const restartButton = document.getElementById('restart-game');
        const leaderboardStats = document.getElementById('leaderboard-stats');

        // Game Variables
        let fuel, medicalKits, repairTools, credits, socialScore, missionsCompleted, grossCredits;
        let missionOptions = [];
        let currentMission = null;

        // Initialize Game Variables
        function initializeGame() {
            fuel = 10;
            medicalKits = 2;
            repairTools = 1;
            credits = 50;
            socialScore = 0;
            missionsCompleted = 0;
            grossCredits = 0;
            updateLeaderboard();
            output.textContent = "Welcome to Distress Call Simulator!\nClick 'Select Mission' to view available missions.";
            gameOverScreen.style.display = "none";
            startButton.disabled = true;
        }

        // Generate Mission Options
        function generateMissionOptions() {
            missionOptions = [];
            for (let i = 0; i < 3; i++) {
                missionOptions.push({
                    distance: Math.floor(Math.random() * 10) + 5,
                    survivors: Math.floor(Math.random() * 5) + 1,
                    hazards: Array.from({ length: Math.floor(Math.random() * 3) }, () =>
                        ["Asteroid", "Pirates"][Math.floor(Math.random() * 2)]
                    ),
                    reward: Math.floor(Math.random() * 100) + 50
                });
            }
        }

        // Display Mission Options
        function displayMissionOptions() {
            output.textContent = "Select a Mission:\n";
            missionOptions.forEach((mission, index) => {
                output.textContent += `\nMission ${index + 1}:\n`;
                output.textContent += `  Distance: ${mission.distance}\n`;
                output.textContent += `  Survivors: ${mission.survivors}\n`;
                output.textContent += `  Hazards: ${mission.hazards.length > 0 ? mission.hazards.join(", ") : "None"}\n`;
                output.textContent += `  Reward: ${mission.reward} credits\n`;
            });
            startButton.disabled = true;
        }

        // Select a Mission
        function selectMission() {
            generateMissionOptions();
            displayMissionOptions();
            const missionIndex = prompt("Enter the mission number (1-3) to select:") - 1;
            if (missionIndex >= 0 && missionIndex < missionOptions.length) {
                currentMission = missionOptions[missionIndex];
                output.textContent += `\nYou selected Mission ${missionIndex + 1}.\nPrepare your crew and resources!`;
                startButton.disabled = false;
            } else {
                output.textContent += "\nInvalid selection. Please try again.";
            }
        }

        // Travel Phase
        function travel() {
            if (currentMission.distance > fuel) {
                output.textContent += "\nNot enough fuel to complete the mission! Mission failed.";
                triggerGameOver();
                return false;
            }
            fuel -= currentMission.distance;
            currentMission.hazards.forEach((hazard) => {
                if (Math.random() < 0.3) {
                    if (hazard === "Asteroid" && repairTools > 0) {
                        repairTools--;
                        output.textContent += "\nEncountered an Asteroid. Used a repair tool.";
                    } else if (hazard === "Pirates") {
                        credits -= 25;
                        output.textContent += "\nEncountered Pirates. Lost 25 credits.";
                    } else {
                        output.textContent += `\nEncountered ${hazard}. No resources available to mitigate damage.`;
                    }
                }
            });
            return true;
        }

        // Rescue Phase
        function rescue() {
            const survivorsSaved = Math.min(currentMission.survivors, medicalKits);
            medicalKits -= survivorsSaved;
            socialScore += survivorsSaved;
            grossCredits += currentMission.reward;
            credits += currentMission.reward;
            output.textContent += `\nRescued ${survivorsSaved}/${currentMission.survivors} survivors.`;
            missionsCompleted++;
            updateLeaderboard();
        }

        // Start Mission
        function startMission() {
            if (!currentMission) return;
            output.textContent += "\nStarting Mission...\n";
            if (travel()) {
                rescue();
                output.textContent += "\nMission Complete!";
            }
            currentMission = null;
            startButton.disabled = true;
        }

        // Update Leaderboard
        function updateLeaderboard() {
            leaderboardStats.innerHTML = `
                <li>Social Score: ${socialScore}</li>
                <li>Missions Completed: ${missionsCompleted}</li>
                <li>Gross Credits: ${grossCredits}</li>
            `;
        }

        // Event Listeners
        selectMissionButton.addEventListener("click", selectMission);
        startButton.addEventListener("click", startMission);
        restartButton.addEventListener("click", initializeGame);

        // Initialize Game on Load
        initializeGame();
    </script>
</body>
</html>
