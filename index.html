<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Economy of Nothing | Official Terminal</title>
  <link rel="stylesheet" href="/style.css" />
  <link rel="icon" href="/media/favicon.png" />
</head>
<body>

  <header class="site-header">
    <h1>Economy of Nothing</h1>
    <p class="tagline">A Dystopian Odyssey Through the Corporate Cosmos</p>
    
    <nav class="portfolio-nav">
      <a href="/podcast.html">Podcast</a>
      <a href="/codex.html">Codex</a>
      <a href="/portfolio.html">Portfolio</a>
      <a href="/patreon.html">Support</a>
    </nav>
  </header>

  <main>
    <section class="about-block">
      <h2>Transmission Received</h2>
      <p>
        Part space opera, part existential prank. <strong>The Economy of Nothing</strong> is what’s left when the future shows up and no one wants it.
      </p>
    </section>

    <section class="playlist-showcase">
      <div class="playlist-meta">
        <h3>Visual Radio | The Terminal</h3>
        <p>Flagship talk show featuring absurdist world-building and corporate satire. Managed and Produced by Mike Bedont.</p>
      </div>
      
      <div class="video-player">
        <iframe id="player-eon" src="" allowfullscreen loading="lazy"></iframe>
      </div>
      
      <div class="playlist-carousel" id="carousel-eon">
        <p>Scanning intergalactic frequencies...</p>
      </div>
      
      <a href="https://www.youtube.com/playlist?list=PLPrT6qMbooEmOi60hDqeFKFDgmO1lRfWA" target="_blank" class="cta-link">▶️ View Full Archive</a>
    </section>

    <section class="about-block">
      <h2>Latest Deep-Space Feed</h2>
      <div class="responsive-iframe-container" id="latest-full-video">
        <p>Syncing Video Stream...</p>
      </div>

      <div class="responsive-iframe-container" id="latest-short">
        <p>Syncing Short-Range Signal...</p>
      </div>
    </section>

    <section class="about-block">
      <h2>Audio Log Entries</h2>
      <div class="libsyn-embed">
        <iframe title="Episode 117" width="100%" height="192" src="https://play.libsyn.com/embed/episode/id/39892420/theme/modern/custom-color/00ff00" allowfullscreen></iframe>
      </div>

      <div class="external-links">
        <a href="https://podcasts.apple.com/us/podcast/the-economy-of-nothing-podcast/id1805857583" class="filter-pill">Apple Podcasts</a>
        <a href="https://open.spotify.com/show/..." class="filter-pill">Spotify</a>
        <a href="https://www.patreon.com/economyofnothing" class="filter-pill active">Support on Patreon</a>
      </div>
    </section>
  </main>

  <footer>
    <p>© 56.009 Nothing Inc.</p>
    <p class="visitor-counter">Visitor: 00025301</p>
  </footer>

  <script>
    const channelId = 'UCSQun-kKmhoJ9K9VPlTP0ww';
    const eonPlaylistId = 'PLPrT6qMbooEmOi60hDqeFKFDgmO1lRfWA';
    const feedURL = `https://api.rss2json.com/v1/api.json?rss_url=https://www.youtube.com/feeds/videos.xml?channel_id=${channelId}`;

    // 1. CAROUSEL ENGINE: Visual Radio
    async function initCarousel(pId, cId, plId) {
      const carousel = document.getElementById(cId);
      const player = document.getElementById(plId);
      const res = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=https://www.youtube.com/feeds/videos.xml?playlist_id=${pId}`);
      const data = await res.json();
      if (data.items) {
        carousel.innerHTML = "";
        data.items.forEach((item, index) => {
          const videoId = item.link.match(/(?:v=|\/)([0-9A-Za-z_-]{11})/)[1];
          const img = document.createElement("img");
          img.src = item.thumbnail;
          img.onclick = () => {
            carousel.querySelectorAll("img").forEach(el => el.classList.remove("active-thumb"));
            img.classList.add("active-thumb");
            player.src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
          };
          if (index === 0) { img.classList.add("active-thumb"); player.src = `https://www.youtube.com/embed/${videoId}`; }
          carousel.appendChild(img);
        });
      }
    }

    // 2. LATEST FEED ENGINE: Full Video & Shorts
    fetch(feedURL)
      .then(res => res.json())
      .then(data => {
        // Full Video
        const full = data.items.filter(v => !v.link.includes('/shorts/'))[0];
        const fullId = full.link.split('v=')[1]?.split('&')[0];
        document.getElementById('latest-full-video').innerHTML = `<iframe src="https://www.youtube.com/embed/${fullId}" allowfullscreen></iframe>`;
        
        // Shorts
        const short = data.items.filter(v => v.link.includes('/shorts/'))[0];
        const shortId = short.link.split('/shorts/')[1].split('?')[0];
        document.getElementById('latest-short').innerHTML = `<iframe src="https://www.youtube.com/embed/${shortId}" allowfullscreen></iframe>`;
      });

    // Run Carousel
    initCarousel(eonPlaylistId, 'carousel-eon', 'player-eon');
  </script>
</body>
</html>
